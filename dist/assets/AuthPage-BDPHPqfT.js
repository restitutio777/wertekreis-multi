import{c as R,u as T,j as e,a as C,b as p}from"./index-UPCPm7Xb.js";import{r as o}from"./vendor-Cu3A5fdw.js";import{S as Z}from"./SoulCirclesText-DtdeAgfd.js";import{L as O}from"./LanguageSelector-CqzIzptC.js";import{H as U,C as H}from"./home-CzafomOg.js";import{A as W}from"./alert-circle-Dl6xFNS-.js";import{M as $}from"./mail-7FZAnjsI.js";import{L as M}from"./lock-C2abeNR2.js";import{E as F}from"./eye-CVLK1UUA.js";import{A as K}from"./arrow-left-l6isnbXA.js";import"./supabase-DM9F-q20.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=R("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function ae({onAuthSuccess:z,onNavigate:j,initialAuthFlow:b="login"}){const{t:s}=T(),[r,d]=o.useState(b),[c,g]=o.useState(""),[t,u]=o.useState(""),[i,m]=o.useState(""),[N,v]=o.useState(""),[y,k]=o.useState(""),[f,A]=o.useState(!1),[w,D]=o.useState(!1),[P,S]=o.useState(!1),[x,l]=o.useState(null);o.useEffect(()=>{d(b)},[b]),o.useEffect(()=>{new URLSearchParams(window.location.search).get("type")==="recovery"&&(d("resetPassword"),window.history.replaceState({},document.title,window.location.pathname))},[]);const h=a=>a.length>=6,q=async a=>{a.preventDefault(),S(!0),l(null);try{if(r==="login"){const{error:n}=await p.signIn(c,t);if(n)throw n;z()}else if(r==="signup"){if(!h(t))throw new Error("Das Passwort muss mindestens 6 Zeichen lang sein");if(t!==i)throw new Error("Die Passwörter stimmen nicht überein");const{error:n}=await p.signUp(c,t,{username:N,display_name:y});if(n)throw n;l({type:"success",text:"Registrierung erfolgreich! Bitte überprüfe deine E-Mails zur Bestätigung."})}else if(r==="forgotPassword"){const{error:n}=await p.resetPasswordForEmail(c);if(n)throw n;l({type:"success",text:"Ein Link zum Zurücksetzen des Passworts wurde an deine E-Mail-Adresse gesendet."})}else if(r==="resetPassword"){if(!h(t))throw new Error("Das Passwort muss mindestens 6 Zeichen lang sein");if(t!==i)throw new Error("Die Passwörter stimmen nicht überein");const{error:n}=await p.updatePassword(t);if(n)throw n;l({type:"success",text:"Passwort erfolgreich zurückgesetzt! Du wirst zur Anmeldung weitergeleitet."}),setTimeout(()=>{d("login"),u(""),m(""),l(null)},2e3)}}catch(n){l({type:"error",text:n.message||"Ein Fehler ist aufgetreten"})}finally{S(!1)}},B=()=>{d(r==="login"?"signup":"login"),l(null),g(""),u(""),m(""),v(""),k("")},E=()=>{switch(r){case"login":return s("auth.login");case"signup":return s("auth.createProfile");case"forgotPassword":return s("auth.resetPassword");case"resetPassword":return s("auth.resetPassword")}},I=()=>{switch(r){case"login":return s("auth.welcomeBack");case"signup":return s("auth.joinCommunity");case"forgotPassword":return s("auth.resetPassword");case"resetPassword":return s("auth.resetPassword")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-cream flex items-center justify-center px-3 py-4 md:p-4 relative",children:[e.jsxs("div",{className:"fixed inset-0 z-0",children:[e.jsx("img",{src:"/topglobe copy.jpg",alt:"Werte•Kreis Background",className:"w-full h-full object-cover object-center sm:object-center lg:object-center",style:{imageRendering:"crisp-edges",filter:"contrast(1.1) brightness(1.05) saturate(1.1)",transform:"scale(1.1)",transformOrigin:"center center"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-akaroa-100/60 via-akaroa-200/60 to-akaroa-300/70"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rhino/8 via-transparent to-walnut/12"})]}),e.jsxs("div",{className:"w-full max-w-md md:max-w-lg lg:max-w-xl",children:[e.jsx("div",{className:"lg:flex hidden mb-4 relative z-10",children:e.jsxs("button",{onClick:()=>j("home"),className:"bg-akaroa-100 text-rhino hover:bg-akaroa-200 rounded-lg transition-colors duration-200 p-2 flex items-center space-x-2",title:"Zurück zur Startseite",children:[e.jsx(U,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Startseite"})]})}),e.jsxs("div",{className:"bg-cream/70 backdrop-blur-[15px] rounded-2xl shadow-glass-card overflow-hidden relative z-10 border border-sandstone-300/50",children:[e.jsxs("div",{className:"bg-akaroa-100/60 backdrop-blur-[10px] px-8 py-6 text-center shadow-glass-summary border-b border-sandstone-300/50",children:[e.jsxs("div",{className:"mb-4 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-rhino/5 backdrop-blur-[5px] rounded-lg border border-rhino/10"}),e.jsx("div",{className:"relative z-10 py-2",children:e.jsx(Z,{variant:"monochrome",size:"lg",className:"relative"})})]}),r==="forgotPassword"&&e.jsx("div",{className:"bg-rhino/15 backdrop-blur-[8px] rounded-lg p-4 border border-rhino/20 shadow-glass-card",children:e.jsxs("div",{className:"text-sm text-desert",children:[e.jsx("div",{className:"font-medium mb-2 text-rhino",children:"Keine E-Mail erhalten?"}),e.jsxs("div",{className:"space-y-2 text-walnut",children:[e.jsx("p",{children:e.jsx("strong",{children:"Bitte überprüfen Sie:"})}),e.jsxs("ul",{className:"space-y-1 ml-4 text-walnut",children:[e.jsx("li",{children:"• Ihren Spam-/Junk-Ordner"}),e.jsx("li",{children:"• Die korrekte E-Mail-Adresse"}),e.jsx("li",{children:"• Warten Sie 5-10 Minuten (E-Mails können verzögert ankommen)"})]}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-walnut/30",children:[e.jsxs("p",{className:"text-xs text-walnut",children:[e.jsx("strong",{children:"Immer noch keine E-Mail?"}),e.jsx("br",{}),"Versuchen Sie den Vorgang erneut oder kontaktieren Sie unseren Support unter"," ",e.jsx("a",{href:"mailto:werte-im-wandel@mailbox.org",className:"underline hover:text-rhino",children:"werte-im-wandel@mailbox.org"})]}),e.jsx("p",{className:"text-xs mt-1 text-walnut",children:"Geben Sie dabei Ihre E-Mail-Adresse und den Zeitpunkt der Anfrage an."})]})]})]})}),e.jsx("h1",{className:"text-2xl font-light font-logo text-rhino mb-2",children:E()}),e.jsx("p",{className:"text-walnut/80 text-sm font-light",children:r==="signup"?s("auth.findWhatLives"):I()}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(O,{})})]}),e.jsxs("div",{className:"px-6 py-8 md:p-8",children:[x&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-3 ${x.type==="success"?"bg-success-50/80 backdrop-blur-[5px] border border-success-200/70 text-success-700":"bg-error-50/80 backdrop-blur-[5px] border border-error-200/70 text-error-700"}`,children:[x.type==="success"?e.jsx(H,{className:"w-5 h-5 text-success-600 flex-shrink-0"}):e.jsx(W,{className:"w-5 h-5 text-error-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:x.text})]}),e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[r!=="resetPassword"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-walnut mb-2",children:s("auth.email")}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-walnut w-5 h-5"}),e.jsx("input",{id:"email",type:"email",value:c,onChange:a=>g(a.target.value),className:"w-full pl-10 pr-4 py-3 bg-cream/80 backdrop-blur-[5px] border border-sandstone-300/60 rounded-lg focus:ring-2 focus:ring-rhino focus:border-transparent transition-all duration-200",placeholder:s("auth.email"),required:!0})]})]}),r==="signup"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-walnut mb-2",children:s("auth.username")}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-walnut w-5 h-5"}),e.jsx("input",{id:"username",type:"text",value:N,onChange:a=>v(a.target.value),className:"w-full pl-10 pr-4 py-3 bg-cream/80 backdrop-blur-[5px] border border-sandstone-300/60 rounded-lg focus:ring-2 focus:ring-rhino focus:border-transparent transition-all duration-200",placeholder:s("auth.username"),required:!0})]})]}),r==="signup"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-walnut mb-2",children:s("auth.displayName")}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-walnut w-5 h-5"}),e.jsx("input",{id:"displayName",type:"text",value:y,onChange:a=>k(a.target.value),className:"w-full pl-10 pr-4 py-3 bg-cream/80 backdrop-blur-[5px] border border-sandstone-300/60 rounded-lg focus:ring-2 focus:ring-rhino focus:border-transparent transition-all duration-200",placeholder:s("auth.displayName"),required:!0})]})]}),r!=="forgotPassword"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-walnut mb-2",children:s("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-walnut w-5 h-5"}),e.jsx("input",{id:"password",type:f?"text":"password",value:t,onChange:a=>u(a.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 ${r!=="login"&&t&&!h(t)?"border-error-300 bg-error-50/80 backdrop-blur-[5px]":"bg-cream/80 backdrop-blur-[5px] border-sandstone-300/60"}`,placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>A(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-walnut hover:text-rhino transition-colors",children:f?e.jsx(L,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]}),r!=="login"&&t&&!h(t)&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:s("auth.passwordMinLength")})]}),(r==="signup"||r==="resetPassword")&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-walnut mb-2",children:s("auth.confirmPassword")}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-walnut w-5 h-5"}),e.jsx("input",{id:"confirmPassword",type:w?"text":"password",value:i,onChange:a=>m(a.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 ${i&&t!==i?"border-error-300 bg-error-50/80 backdrop-blur-[5px]":"bg-cream/80 backdrop-blur-[5px] border-sandstone-300/60"}`,placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>D(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-walnut hover:text-rhino transition-colors",children:w?e.jsx(L,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]}),i&&t!==i&&e.jsx("p",{className:"mt-1 text-sm text-error-600",children:s("auth.passwordsDoNotMatch")})]}),e.jsx("button",{type:"submit",disabled:P,className:"w-full bg-desert/70 backdrop-blur-[8px] text-white py-3 px-4 rounded-lg font-medium shadow-glass-button hover:shadow-glass-button-hover hover:bg-desert/80 focus:outline-none focus:ring-2 focus:ring-desert focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 border border-desert-600/50 hover:border-desert-600/60 transform hover:scale-[1.02] active:scale-[0.99]",children:P?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),s("auth.processing")]}):E()})]}),(r==="forgotPassword"||r==="resetPassword")&&e.jsxs("button",{type:"button",onClick:()=>{d("login"),l(null),g(""),u(""),m("")},className:"w-full flex items-center justify-center gap-2 text-walnut hover:text-rhino py-2 transition-colors duration-200",children:[e.jsx(K,{className:"w-4 h-4"}),s("auth.backToLogin")]}),(r==="login"||r==="signup")&&e.jsxs("div",{className:"text-center pt-4 border-t border-sandstone-300",children:[e.jsx("p",{className:"text-sm text-walnut",children:s(r==="login"?"auth.noAccount":"auth.alreadyRegistered")}),e.jsx("button",{type:"button",onClick:B,className:"text-desert hover:text-desert-700 font-semibold text-base mt-2 px-3 py-1 rounded-md bg-desert/20 backdrop-blur-[5px] hover:bg-desert/30 transition-all duration-200 border border-desert/30 hover:border-desert/40",children:s(r==="login"?"auth.registerNow":"auth.toLogin")})]}),r==="login"&&e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{type:"button",onClick:()=>d("forgotPassword"),className:"text-desert hover:text-desert/80 text-sm underline transition-colors duration-200",children:s("auth.forgotPassword")})}),(r==="login"||r==="signup")&&e.jsx("div",{className:"mt-6 p-4 bg-desert/20 backdrop-blur-[8px] rounded-lg border border-desert/30 text-sm leading-relaxed shadow-glass-card",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"font-medium font-logo text-rhino flex items-center space-x-2",children:[e.jsx("span",{children:"✨"}),e.jsx("span",{children:s("auth.appFeatures.title")})]}),e.jsxs("ul",{className:"space-y-2 text-walnut",children:[e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-desert rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:s("auth.appFeatures.findLikeMinded")})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-desert rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:s("auth.appFeatures.shareSpaces")})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-desert rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:s("auth.appFeatures.discoverEvents")})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-desert rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:s("auth.appFeatures.authenticConnect")})]}),e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-desert rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:s("auth.appFeatures.contribute")})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-desert/30",children:e.jsxs("p",{className:"text-xs text-desert text-center font-medium",children:["🌿 ",s("auth.appFeatures.platformDescription")]})})]})}),e.jsx("div",{className:"mt-6 p-4 bg-akaroa-100/70 backdrop-blur-[8px] rounded-lg border border-sandstone-300/50 text-sm text-walnut leading-relaxed shadow-glass-summary",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium font-logo text-rhino",children:s("auth.privacyNotice.title")}),e.jsx("p",{children:s("auth.privacyNotice.description")}),e.jsxs("p",{children:[s("auth.privacyNotice.detailsLink")," ",e.jsx("button",{type:"button",onClick:()=>j("legal"),className:"text-desert hover:text-desert-700 underline transition-colors duration-200 font-medium",children:s("auth.privacyNotice.privacyPolicy")}),"."]}),e.jsx("p",{children:s("auth.privacyNotice.consent")})]})})]})]})]})]})})}export{ae as default};
